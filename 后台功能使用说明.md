# 易对接项目后台用户管理功能使用说明

根据您的需求，我们为您编写了两个新的 PHP 文件，用于实现一个简易的后台用户管理功能，方便您进行用户列表查看、封禁、解封以及增加金币等操作。

## 1. 新增文件

1.  `admin_user_manage.php`: 后台用户列表展示和操作界面。
2.  `admin_user_action.php`: 处理用户操作（封禁、解封、增加金币）的后端逻辑。

## 2. 使用方法

### 步骤 1: 访问管理页面

您可以通过浏览器访问以下 URL 来进入用户管理界面：

```
http://您的域名/admin_user_manage.php?admin=您的管理员账号&pass=您的管理员密码
```

**示例：** 如果您的管理员账号是 `123456`，密码是 `admin_pass`，则访问：

```
http://您的域名/admin_user_manage.php?admin=123456&pass=admin_pass
```

> **注意：** 首次访问时，您需要提供 `admin` 和 `pass` 参数。程序会验证您的身份，并尝试将这两个参数保存在 Session 中，以便后续操作。

### 步骤 2: 进行用户操作

在用户管理页面上，您可以看到所有用户的列表，包括他们的账号、昵称、金币、会员状态和封禁状态。

在“操作”列中，您可以执行以下操作：

| 操作名称 | 描述 |
| :--- | :--- |
| **封禁** | 在输入框中填写封禁时长（单位：**秒**），然后点击“封禁”按钮。例如，输入 `86400` 表示封禁 24 小时。 |
| **解封** | 直接点击“解封”按钮，将立即解除用户的封禁状态。 |
| **增加金币** | 在输入框中填写要增加的金币数量，然后点击“增加金币”按钮。 |

### 步骤 3: 查看操作结果

所有操作都会跳转到 `admin_user_action.php` 进行处理。处理完成后，页面会显示操作结果（成功或失败），并提供一个链接返回用户管理页面。

## 3. 安全警告与实现细节

### 安全警告

*   **极度不安全：** 本功能沿用了原项目通过 URL 参数传递管理员账号和密码（`admin` 和 `pass`）的验证方式。**在任何生产环境中，这种做法都极度不安全。** 建议您在正式使用前，务必将权限验证逻辑修改为基于安全的 Session/Cookie 的登录验证机制。

### 实现细节

*   **用户数据源：** 本功能完全基于原项目的文件系统存储结构（即 `userss/{admin}/userss/{user}/` 目录下的各种文件）进行读取和写入，没有依赖数据库。
*   **封禁/解封逻辑：**
    *   **封禁：** 通过计算 `当前时间 + 封禁时长` 得到一个未来的时间戳，并写入到用户目录下的 `seal` 文件中。
    *   **解封：** 将 `0` 写入到用户目录下的 `seal` 文件中，表示封禁已解除或已过期。
*   **增加金币逻辑：** 直接读取用户目录下的 `money` 文件，加上增加的金额，然后将新总额写回 `money` 文件。
*   **兼容性：** 由于原项目文件结构特殊，本功能旨在最小化侵入性地实现您的需求，因此代码风格和逻辑尽量贴合原项目。

请将这两个文件上传到您的项目根目录下即可使用。如有其他功能需求，请随时提出。
