# 易对接项目后台仪表板功能说明（MySQL版本）

根据您的要求，我为您编写了一套基于 **MySQL 数据库**的后台仪表板管理功能，实现了用户管理、数据统计、公告更改以及后台账号密码修改等核心功能。

## 1. 核心文件列表

| 文件名 | 描述 |
| :--- | :--- |
| `dashboard_db_setup.sql` | **数据库初始化文件**。包含 `dashboard_users` (后台用户)、`dashboard_config` (系统配置/公告) 和 `users` (平台用户) 三个表的创建语句和示例数据。 |
| `dashboard_auth.php` | **数据库连接和认证文件**。包含数据库配置、连接函数、登录检查和配置读写函数。 |
| `dashboard_login.php` | **后台登录页面**。用于管理员登录。 |
| `dashboard_logout.php` | **退出登录逻辑**。 |
| `dashboard_index.php` | **仪表板主页**。展示用户、会员、余额、文档等数据统计，以及公告的查看和更改功能。 |
| `dashboard_user_manage.php` | **用户管理页面**。展示用户列表，并提供操作界面。 |
| `dashboard_user_action.php` | **用户操作逻辑**。处理封禁、解封、增加余额、增加会员时长和删除用户等操作。 |
| `dashboard_settings.php` | **账号设置页面**。提供管理员修改密码的功能。 |

## 2. 部署和使用步骤

### 步骤 1: 数据库初始化

1.  **创建数据库：** 确保您有一个名为 `appdoc` 的 MySQL 数据库（或根据 `dashboard_auth.php` 中的配置修改）。
2.  **导入结构：** 使用 MySQL 客户端工具（如 phpMyAdmin, Navicat 等），执行 `dashboard_db_setup.sql` 文件中的 SQL 语句。
    *   这将创建三个表：`dashboard_users`, `dashboard_config`, `users`。
    *   默认管理员账号：`admin`，密码：`123456`。

### 步骤 2: 配置数据库连接

1.  打开 `dashboard_auth.php` 文件。
2.  修改以下常量，以匹配您的数据库连接信息：
    ```php
    define('DB_HOST', 'localhost');
    define('DB_USER', 'root');
    define('DB_PASS', '您的数据库密码'); // **请务必修改**
    define('DB_NAME', 'appdoc');
    ```

### 步骤 3: 访问后台

1.  将所有 PHP 文件上传到您的项目根目录。
2.  通过浏览器访问登录页面：
    ```
    http://您的域名/dashboard_login.php
    ```
3.  使用默认账号 `admin` 和密码 `123456` 登录。

## 3. 后台功能概览

| 模块 | 功能描述 | 对应文件 |
| :--- | :--- | :--- |
| **仪表板** | 统计总用户数、活跃会员数、会员到期数、平台总余额、总文档数量。并提供公告的查看和修改。 | `dashboard_index.php` |
| **用户管理** | 展示所有用户列表，包括会员到期时间和封禁状态。提供以下操作：**封禁/解封**、**增加余额**、**增加会员时长**、**删除用户**。 | `dashboard_user_manage.php`, `dashboard_user_action.php` |
| **账号设置** | 允许当前登录的管理员修改自己的登录密码。 | `dashboard_settings.php` |
| **退出登录** | 销毁 Session 并安全退出。 | `dashboard_logout.php` |

## 4. 安全警告（重要）

**请注意：**

1.  **密码哈希：** 在 `dashboard_auth.php` 和 `dashboard_settings.php` 中，为了在沙盒环境中演示逻辑，我使用了**简化的密码验证和修改逻辑**，并加入了注释提醒。
    *   **在实际生产环境中，您必须使用 PHP 内置的 `password_hash()` 和 `password_verify()` 函数来安全地存储和验证密码。** 否则您的管理员密码将面临泄露风险。
2.  **数据库密码：** `dashboard_auth.php` 中的 `DB_PASS` 必须修改为您真实且安全的数据库密码。

请将所有附件文件部署到您的服务器上。如有任何问题，请随时提出。
